FROM mongo:5.0.17@sha256:31619fbe9e69f118f1cc6c20d0cb56ad09762ec0bc8014b4e5771704fa37bef7

ARG MONGODB_CONNECTION_STRING
ENV MONGODB_CONNECTION_STRING=${MONGODB_CONNECTION_STRING}

ARG MONGODB_USERNAME
ENV MONGODB_USERNAME=${MONGODB_USERNAME}

ARG MONGODB_PASSWORD
ENV MONGODB_PASSWORD=${MONGODB_PASSWORD}

ARG MONGODB_DATABASE
ENV MONGODB_DATABASE=${MONGODB_DATABASE}

COPY ./init.sh /app/init.sh

RUN chmod +x /app/init.sh

CMD /app/init.sh $MONGODB_CONNECTION_STRING $MONGODB_USERNAME $MONGODB_PASSWORD $MONGODB_DATABASE
